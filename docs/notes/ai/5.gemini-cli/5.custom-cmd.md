---
title: 自定义斜杠命令
createTime: 2025/08/13 14:40:43
permalink: /ai/gemini-cli-custom-commands/
---


如果您想同时配置这两种模式，并指示 Gemini CLI 通过 /plan 或 /explain 斜杠命令进入其中任一模式，该怎么办？这正是 Gemini CLI 自定义斜杠命令的用途。

借助自定义命令，您可以在 Gemini CLI 中将自己喜爱或最常用的提示保存为个人快捷方式，以便日后重复使用。您可以创建特定于单个项目的命令，也可以创建可在所有项目中全局使用的命令，从而简化工作流程并确保一致性。


让我们创建两个自定义斜杠命令：`/plan` 和 `/explain`。


下一步是了解 Gemini CLI 从何处获取自定义命令。根据文档，它会从两个位置发现命令，并按特定顺序加载：

- 用户命令（全局）：位于 `~/.gemini/commands/` 中。这些命令可在您处理的任何项目中执行。
- 项目命令（本地）：位于 `<your-project-root>/.gemini/commands/` 中。这些命令特定于当前项目，可以签入版本控制以与团队共享。

让我们从您启动 Gemini CLI 的位置选择当前项目文件夹。因此，此文件夹将为 `<your-project-root>/.gemini/commands/` 文件夹。继续操作并创建文件夹结构。

我们需要在此文件夹中创建哪些内容？我们需要两个 `TOML` 文件（plan.toml 和 explain.toml）。如果您想详细了解命名空间和命名惯例，请点击[此处](https://github.com/google-gemini/gemini-cli/blob/36750ca49b1b2fa43a3d7904416b876203a1850f/docs/cli/commands.md#naming-and-namespacing)。


每个 `TOML` 文件都需要包含两个字段：`description` 和 `prompt`。请确保说明简短明了，因为该说明将显示在 `Gemini CLI` 中的命令旁边。以下 `TOML` 文件示例摘自官方的“自定义斜杠命令”博文。


下面显示了一个 `plan.toml` 文件示例。请注意，提示包含一个特殊占位符 {{args}}，CLI 会将该占位符替换为用户在命令名称后输入的所有文本。

```toml
description = "调查并制定实现任务的战略计划。"
prompt = """
你的主要角色是战略家，而不是执行者。你的任务是停下来，深入思考，并制定一个全面的战略计划来实现以下目标：{{args}}

你绝对不能编写、修改或执行任何代码。你的唯一职责是调查当前状态并制定计划。

使用你可用的“读取”和“搜索”工具来研究和分析代码库。在提出策略之前，收集所有必要的上下文信息。

以Markdown格式呈现你的战略计划。它应该是你调查和思考过程的直接结果。按照以下部分结构化你的回答：

1. 理解目标：重述目标以确认你的理解。
2. 调查与分析：描述你会采取的调查步骤。你需要读取哪些文件？你会搜索什么？在开始任何工作之前需要回答哪些关键问题？
3. 建议的战略方法：概述高级策略。将方法分解为逻辑阶段，并描述每个阶段应进行的工作。
4. 验证策略：解释如何衡量这个计划的成功。需要测试什么以确保目标得以实现，同时不会引入回归问题？
5. 预期的挑战与考虑：根据你的分析，你预见到哪些潜在风险、依赖关系或权衡？

你的最终输出应该仅是这个战略计划。
"""
```

尝试创建 `explain.toml` 文件。您可以参考 Gemini 的[“说明”](https://gist.github.com/philschmid#gemini-cli-explain-mode)模式来选择一些内容。


重启 Gemini CLI。现在，您会发现它有一个斜杠命令 (`/plan`).









