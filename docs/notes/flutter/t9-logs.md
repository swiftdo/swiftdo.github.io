---
title: Flutter æäº¤æ—¥å¿—æœé›†
date: 2021-01-20T00:00:00.000Z
tags:
  - flutter
sitemap:
  exclude: false
  changefreq: hourly
createTime: 2024/08/02 09:19:27
permalink: /flutter/r54ywmxo/
---

å…¬å¸è¦æ±‚æ¯å‘¨éƒ½è¦å†™å‘¨æŠ¥ï¼Œå‘¨æŠ¥çš„å¤§ä½“å†…å®¹å°±æ˜¯ä½ æœ¬å‘¨åšçš„äº‹æƒ…ï¼Œæš‚æ—¶ä¸éœ€è¦æ‰€æ€æ‰€æƒ³æ‰€æ„Ÿ(è´¨é‡è¦æ±‚ä¸é«˜)ã€‚é€šå¸¸éƒ½æ˜¯è‡ªå·±ä» gitlab çš„æ“ä½œé¢æ¿ç­›é€‰å‡ºè‡ªå·±æœ¬å‘¨æäº¤çš„æ—¥å¿—ï¼Œç„¶åæ¯ä¸ªæäº¤ title å¤åˆ¶ä¸€ä»½ã€‚ç„¶åæˆ‘å‚»å‚»çš„æŠŠè¿™ä»¶äº‹å¹²äº† 2 å¹´å¤šäº†ï¼Œè™½ç„¶è§‰å¾—åº”è¯¥æœ‰æ›´ä¾¿æ·çš„æ–¹å¼ï¼Œä½†æ˜¯è¿˜æ˜¯å±ˆæœè‡ªå·±æ‡’æƒ°ã€‚ç›´åˆ°æœ‰é‚£ä¹ˆä¸€å¤©ï¼Œä¸Šå¤´è¦æ±‚ ci æ‰“å‡ºçš„åŒ…ï¼Œè¦é™„å¸¦å‘ç‰ˆæ—¥å¿—ğŸ˜±ã€‚

```
æ€»æœ‰é‚£ä¹ˆä¸€å¤©ï¼Œè¯¥æ¥è¿˜æ˜¯ä¼šæ¥ï¼Œåªä¸è¿‡æ˜¯æ—¶é—´ç½¢äº†
```

æœ¬æ–‡å°±æ˜¯åœ¨è¿™ä¸ªéœ€æ±‚å¨å‹ä¸­äº§å‡ºï¼Œç”±äºå¤§å¤§è§£æ”¾åŒæ‰‹ï¼Œæ‰€ä»¥å°†è¿™ä¸ªæ€è·¯æ•´ç†æˆæ–‡ï¼Œä¸€èµ·åŠªåŠ›æˆä¸ºä¸€åå·æ‡’çš„ç¨‹åºå‘˜ã€‚

## ä»æ—¥å¿—è§„èŒƒè¯´èµ·

ä¸ªäººé€šå¸¸åœ¨æäº¤æ—¥å¿—çš„æ—¶å€™ï¼Œä¼šåœ¨æ–‡æœ¬ä¸­æ·»åŠ å‰ç¼€ï¼Œä¸”æœ‰ä»¥ä¸‹è§„èŒƒï¼š

* Featï¼š æ–°åŠŸèƒ½ï¼ˆfeatureï¼‰
* Fixï¼š ä¿®è¡¥bug
* Docsï¼š æ–‡æ¡£ï¼ˆdocumentationï¼‰
* Styleï¼š æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰
* Refactorï¼šé‡æ„ï¼ˆå³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹bugçš„ä»£ç å˜åŠ¨ï¼‰
* Testï¼š å¢åŠ æµ‹è¯•
* Choreï¼š æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

ä¸Šé¢çš„è§„èŒƒæ˜¯æ˜¯æŸä¸ªä¸œå®¶å­¦åˆ°çš„ï¼Œèµ·åˆè§‰å¾—æ·»åŠ å‰ç¼€è§„èŒƒï¼Œä¸è¿‡æ˜¯å¿«é€ŸçŸ¥é“æäº¤çš„å¤§è‡´æ„å›¾ã€‚æ‰€ä»¥åœ¨æŸäº›å°å…¬å¸ï¼Œè¿™ä¸ªä¼˜ç‚¹è¿˜æ˜¯æ— æ³•è®©ä¸€ä¸ªå›¢é˜Ÿä»æ„è¯†ä¸Šéµå®ˆï¼ˆå¦‚æœä¸æ˜¯æŠ€æœ¯è´Ÿè´£äººæ‹æ¿ï¼‰ï¼Œæ€»æœ‰ä¸€ä¸¤ä¸ªäººï¼Œæˆ–è€…å‡ ä¸ªæäº¤çªå…€å‡ºæ¥ï¼Œç ´çª—ç†è®ºå¾ˆå¿«å°±å¾—åˆ°éªŒè¯ã€‚å¯¹äºæ¯«æ— å†³å®šæƒçš„é»˜é»˜æ— é—»çš„ä½ åªèƒ½èµ°è‡ªå·±çš„è·¯äº†ã€‚

ä»¥å‰çœ‹è¿‡ä¸€æœ¬ä¹¦ï¼Œé‡Œé¢æœ‰å¤§è‡´çš„è¯´è¾ï¼šå¯¹äºæˆ’çƒŸçš„äººï¼Œè¦è®©ä»–æˆ’çƒŸï¼Œå‡é‡ã€æ§åˆ¶å¸é£Ÿæ¬¡æ•°ç±»ä¼¼æ–¹æ³•ï¼Œæˆ’çƒŸæ•ˆæœä¸ç†æƒ³ã€‚æ›´å¥½çš„åŠæ³•æ˜¯è®©ä»–æ„è¯†åˆ°å¸çƒŸçš„å±å®³ï¼Œå±å®³çš„è®¤è¯†è¶Šæ·±ï¼Œæˆ’çƒŸçš„æˆåŠŸç‡è¶Šé«˜ã€‚

> å¦‚æœä¸€ä¸ªè§„åˆ™æ— æ³•æ™®åŠï¼Œå¾ˆå¤§åŸå› æ˜¯è¿™ä¸ªè§„åˆ™çš„æ‰€å¸¦æ¥çš„å½±å“æ— æ³•è®©äººæ·±åˆ»æ„è¯†åˆ°ã€‚
> æ•ˆæœè¶Šå¥½ï¼Œé©±åŠ¨åŠ›è¶Šå¼ºã€‚

## æ—¥å¿—å®æ“

æŸ¥çœ‹æäº¤æ—¥å¿—çš„å‘½ä»¤ï¼š

```sh
$ git log
commit f35f45c654e56a1d55aaca24e0e3fd3b9577bcc0 (HEAD -> master, origin/master, origin/HEAD)
Author: jihua <1164258202@qq.com>
Date:   Fri Jan 22 23:03:05 2021 +0800

    Feat: æ·»åŠ è¯¦æƒ…
....
```

å¯èƒ½å¯¹è¿™ä¸ªå‘½ä»¤çš„è®¤è¯†ï¼Œæˆ‘ä»¬å°±åˆ°æ­¤ä¸ºæ­¢äº†ã€‚ä½†é€šè¿‡`help`å‘½ä»¤æˆ‘ä»¬çŸ¥é“å®ƒä¸æ­¢äºæ­¤ã€‚

```sh
git log --help
```

`git log` çš„åŠŸèƒ½å°±æ˜¯æµè§ˆå†å²è®°å½•ã€‚å¯ä»¥é€šè¿‡è®¸å¤šä¸åŒçš„å‚æ•°ä¼ é€’ç»™ `git log` æ¥æ›´æ”¹æ—¥å¿—è¾“å‡ºï¼Œè¿™äº›åŠŸèƒ½å¯ä»¥æ¦‚æ‹¬ä»¥ä¸‹ä¸¤ç±»ï¼š

* æ ¼å¼åŒ–æ¯ä¸ªæäº¤çš„æ˜¾ç¤ºæ–¹å¼
* è¿‡æ»¤è¾“å‡ºä¸­åŒ…æ‹¬å“ªäº›æäº¤

## æ ¼å¼åŒ–

### å°†æ¯æ¬¡æäº¤å‹ç¼©ä¸ºä¸€è¡Œ

å®ƒä»…æ˜¾ç¤ºæäº¤IDå’Œæäº¤æ¶ˆæ¯çš„ç¬¬ä¸€è¡Œï¼Œè¿™å¯¹äº**è·å¾—é¡¹ç›®çš„é«˜çº§æ¦‚è¿°éå¸¸æœ‰ç”¨**ã€‚
 
```sh
$ git log --oneline
f35f45c (HEAD -> master, origin/master, origin/HEAD) Feat: æ·»åŠ è¯¦æƒ…
199a0ce (tag: state) Feat: çŠ¶æ€ä¸åŒæ­¥é—®é¢˜
6e2c7d4 Feat: æ·»åŠ æ–‡ä»¶
```

### æ˜¾ç¤ºæŒ‡å‘æ¯ä¸ªæäº¤çš„æ‰€æœ‰å¼•ç”¨

å¾ˆå¤šæ—¶å€™äº†è§£æ¯ä¸ªæäº¤ä¸å“ªä¸ªåˆ†æ”¯æˆ–æ ‡ç­¾ç›¸å…³è”å¾ˆæœ‰ç”¨ï¼Œä½¿ä½ **å¯ä»¥æ›´å…¨é¢åœ°äº†è§£å­˜å‚¨åº“çš„é€»è¾‘ç»“æ„**ã€‚

```sh
$ git log --oneline --decorate
0e25143 (HEAD, master) Merge branch 'feature'
ad8621a (feature) Fix: fix a bug in the feature
16b36c6 Feat: Add a new feature
23ad9ad (tag: v0.9) Feat: Add the initial code base
```

### æ¯æ¬¡æäº¤æ—¶æ˜¾ç¤ºå·®å¼‚

`--stat` é€‰é¡¹æ˜¾ç¤ºæ¯æ¬¡æäº¤æ›´æ”¹çš„æ¯ä¸ªæ–‡ä»¶çš„æ’å…¥å’Œåˆ é™¤æ¬¡æ•°ï¼ˆè¯·æ³¨æ„ï¼Œä¿®æ”¹ä¸€è¡Œè¡¨ç¤ºä¸º1æ¬¡æ’å…¥å’Œ1æ¬¡åˆ é™¤ï¼‰ï¼Œè¿™ä½¿ä½ äº†è§£å¯ä»¥åœ¨ä½•å¤„æ‰¾åˆ°æ¯ä¸ªæäº¤çš„æ›´æ”¹ã€‚

```sh
$ git log --stat
commit f2a238924e89ca1d4947662928218a06d39068c3
Author: John <john@example.com>
Date: Fri Jun 25 17:30:28 2014 -0500
Add a new feature
hello.py | 105 ++++++++++++++++++++++++-----------------
1 file changed, 67 insertion(+), 38 deletions(-)
```

`-p` æŸ¥çœ‹æ¯ä¸ªæäº¤æ‰€å¼•å…¥çš„å®é™…æ›´æ”¹ã€‚

### ç®€çŸ­æ—¥å¿—

```sh
$ git shortlog
Mary (2):
Fix a bug in the feature
Fix a serious security hole in our framework
John (3):
Add the initial code base
Add a new feature
Merge branch 'feature'
```

å®ƒæŒ‰ä½œè€…å¯¹æ¯ä¸ªæäº¤è¿›è¡Œåˆ†ç»„ï¼Œå¹¶æ˜¾ç¤ºæ¯ä¸ªæäº¤æ¶ˆæ¯çš„ç¬¬ä¸€è¡Œã€‚ è¿™æ˜¯æŸ¥çœ‹è°åœ¨åšä»€ä¹ˆçš„ä¸€ç§ç®€å•æ–¹æ³•ã€‚

### è‡ªå®šä¹‰æ ¼å¼è¾“å‡º

å¯ä»¥ä½¿ç”¨ `--pretty = formatï¼šâ€œ<string>â€`é€‰é¡¹ã€‚è¿™æ ·å¯ä»¥ä½¿ç”¨ printf æ ·å¼çš„å ä½ç¬¦æ¥æ˜¾ç¤ºæ¯ä¸ªæäº¤ã€‚

```sh
$ git log --pretty=format:"%cn:%s(%cd)"
jihua:Feat: æ·»åŠ è¯¦æƒ…(Fri Jan 22 23:03:05 2021 +0800)
jihua:Feat: çŠ¶æ€ä¸åŒæ­¥é—®é¢˜(Sun Jan 17 22:19:48 2021 +0800)
jihua:Feat: æ·»åŠ æ–‡ä»¶(Sun Jan 17 20:30:07 2021 +0800)
jihua:Feat: ä¿®æ”¹(Sun Jan 17 16:43:58 2021 +0800)
jihua:Feat: ä¿®æ”¹(Wed Jan 13 23:06:06 2021 +0800)
```

## è¿‡æ»¤

### é™åˆ¶æ˜¾ç¤ºçš„æäº¤æ•°é‡

é€šè¿‡ `-<n>` é€‰é¡¹æ¥é™åˆ¶ git log çš„è¾“å‡ºæ•°é‡

ä»¥ä¸‹å‘½ä»¤å°†ä»…æ˜¾ç¤º3ä¸ªæœ€æ–°æäº¤

```sh
$ git log -3
```

### æŸ¥æ‰¾ç‰¹å®šæ—¶é—´èŒƒå›´å†…çš„æäº¤

å¯ä»¥ä½¿ç”¨`--after`æˆ–`--before`æ ‡å¿—æ¥æŒ‰æ—¥æœŸè¿‡æ»¤æäº¤

```sh
$ git log --after="2021-1-1"
```

è¿˜å¯ä»¥ä¼ é€’ç›¸å¯¹å¼•ç”¨ï¼Œä¾‹å¦‚â€œ 1å‘¨å‰â€å’Œâ€œæ˜¨å¤©â€ï¼š

```sh
$ git log --after="yesterday"
```

è¦æœç´¢åœ¨ä¸¤ä¸ªæ—¥æœŸä¹‹é—´åˆ›å»ºçš„æäº¤ï¼Œå¯ä»¥åŒæ—¶æä¾›-ä¹‹å‰å’Œ-ä¹‹åçš„æ—¥æœŸ

```sh
$ git log --after="2021-1-1" --before="2021-1-20"
```

### ä»…æŸ¥æ‰¾ç”±ç‰¹å®šç”¨æˆ·åˆ›å»ºçš„æäº¤

```sh
$ git log --author="lai"
```

è¿˜å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥åˆ›å»ºæ›´å¤æ‚çš„æœç´¢ï¼Œä»¥ä¸‹å‘½ä»¤æœç´¢Maryæˆ–Johnçš„æäº¤

```sh
$ git log --author="John\|Mary"
```

### æŒ‰æ–‡ä»¶

è¦æ˜¾ç¤ºä¸æ–‡ä»¶ç›¸å…³çš„å†å²è®°å½•ï¼Œä¼ é€’æ–‡ä»¶è·¯å¾„å³å¯ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç è¿”å›æ‰€æœ‰å½±å“ foo.py æˆ– bar.py æ–‡ä»¶çš„æäº¤

```sh
$ git log -- foo.py bar.py
```

### æŒ‰èŒƒå›´

ä»¥å°†ä¸€ç³»åˆ—æäº¤æäº¤ç»™ git logï¼Œä»¥ä»…æ˜¾ç¤ºè¯¥èŒƒå›´å†…åŒ…å«çš„æäº¤ã€‚å½“ä½ ä½¿ç”¨åˆ†æ”¯å¼•ç”¨ä½œä¸ºå‚æ•°æ—¶ï¼Œæ­¤å‘½ä»¤ç‰¹åˆ«æœ‰ç”¨ã€‚

```sh
$ git log master..feature 
```

ä»¥ä¸Šæ˜¯å¯¹ git log ä¸€äº›å‚æ•°çš„ä½¿ç”¨ä»‹ç»ï¼Œè¿˜æœ‰æ›´å¤šå‚æ•°çš„ä½¿ç”¨ï¼Œå¯ä»¥å‚è€ƒæ–‡æ¡£ [æŸ¥çœ‹æäº¤å†å²](https://git-scm.com/book/zh/v2/Git-%E5%9F%BA%E7%A1%80-%E6%9F%A5%E7%9C%8B%E6%8F%90%E4%BA%A4%E5%8E%86%E5%8F%B2)

## å®æˆ˜ç”Ÿæˆå‘¨æŠ¥

åŠŸèƒ½éœ€æ±‚ï¼šè·å–ç”¨æˆ·laiåœ¨æœ¬å‘¨çš„ä»£ç æ—¥å¿—åˆ°æ–‡ä»¶ log.txt ä¸­ï¼Œä¸åŒ…æ‹¬ merge çš„ä¿¡æ¯ï¼Œè¾“å‡ºæ ¼å¼å¦‚ä¸‹ï¼š

```
* Feat: æ·»åŠ è¯¦æƒ…(2021-01-22)
```

é‚£ä¹ˆè¦å®Œæˆè¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬è¦åšçš„æœ‰ï¼š

* è·å–åˆ° lai çš„æ—¥å¿—
* è·å–åˆ°æœ¬å‘¨çš„æ—¥å¿—
* è‡ªå®šä¹‰æ—¥å¿—çš„è¾“å‡º
* å»é™¤ merge ä¿¡æ¯
* è¾“å‡ºåˆ°æ–‡ä»¶ log.txt ä¸­

æ‰€ä»¥ï¼Œæ•´ä¸ªå‘½ä»¤ï¼š

```sh
$ git log --no-merges --author=lai --since=1.weeks --pretty=format:'* %s(%ad)' --date=short > ~/Desktop/log.txt
```

`log.txt` çš„å†…å®¹ç±»ä¼¼ï¼š

```sh
* Chore: ç‰ˆæœ¬å‡çº§åˆ° 1.5.0(2021-01-23)
* Chore: è‡ªåŠ¨åŒ–æ‰“åŒ…è„šæœ¬ä¼˜åŒ–(2021-01-23)
* Chore: è„šæœ¬ä¼˜åŒ–, å‘ç‰ˆçš„æ—¶å€™å¼ºåˆ¶è®¾ç½®ç¯å¢ƒï¼Œé˜²æ­¢å—å…¶ä»–åˆ†æ”¯æ”¹åŠ¨å½±å“(2021-01-23)
* Feat: h5 æ¥å£å¯¹æ¥(2021-01-22)
* Fix: è§£å†³æ•°ç»„è¶Šç•Œé—®é¢˜(2021-01-22)
* Doct: README æ–‡æ¡£ä¿®æ”¹(2021-01-22)
* Refactorï¼šé‡æ„ WebController (2021-01-22)
```

é‚£ä¹ˆè¿™ä¸ªåŠŸèƒ½å°±åšå®Œæˆäº†ã€‚ä½†ä½ ä»¥ä¸ºå°±ç»“æŸäº†ä¹ˆï¼Ÿ

## æ›´è¿›ä¸€æ­¥

å¯¹äºæ–‡ç« å¼€å¤´æåˆ°çš„æäº¤è§„èŒƒï¼Œæˆ‘ä»¬è¯´å¯¹äºè§„èŒƒçš„ç›Šå¤„è®¤è¯†ä¸è¶³ã€‚å½“æˆ‘ä»¬å°†æ—¥å¿—æœé›†åˆ° `log.txt` ä¸­ï¼Œå¦‚æœå°±æ€ä¹ˆç»™ä¸Šå¤´å®¡é˜…çš„ï¼Œå¯èƒ½ä¼šè¢«æ‰“å›æ¥ï¼Œå› ä¸ºä¸èƒ½ä¸€çœ¼çŸ¥é“ï¼Œå“ªäº›æ˜¯æ–°å¢ï¼Œå“ªäº›æ˜¯ä¿®æ”¹ï¼Œå“ªäº›æ˜¯ä¼˜åŒ–ã€‚æ‰€ä»¥æˆ‘ä»¬å¿…é¡»ç»™æ—¥å¿—è¿›è¡Œæ•´ç†ï¼Œä¸èƒ½å°±è¿™ä¹ˆç›´ç™½çš„è¾“å‡ºã€‚å¸Œæœ›çœ‹åˆ°ï¼š

```sh
## æ–°å¢
* h5 æ¥å£å¯¹æ¥(2021-01-22)
## bug
* è§£å†³æ•°ç»„è¶Šç•Œé—®é¢˜(2021-01-22)
## ä¼˜åŒ–
* é‡æ„ WebController (2021-01-22)
## æ–‡æ¡£
* README æ–‡æ¡£ä¿®æ”¹(2021-01-22)
## å…¶ä»–
* ç‰ˆæœ¬å‡çº§åˆ° 1.5.0(2021-01-23)
* è‡ªåŠ¨åŒ–æ‰“åŒ…è„šæœ¬ä¼˜åŒ–(2021-01-23)
* è„šæœ¬ä¼˜åŒ–, å‘ç‰ˆçš„æ—¶å€™å¼ºåˆ¶è®¾ç½®ç¯å¢ƒï¼Œé˜²æ­¢å—å…¶ä»–åˆ†æ”¯æ”¹åŠ¨å½±å“(2021-01-23)
```

é‚£ä¹ˆæœ¬è´¨ä¸Šå°±æ˜¯å¯¹æ—¥å¿—è¿›è¡Œå½’ç±»ï¼š

* Feat => æ–°å¢
* Fix => bug
* Refactor => ä¼˜åŒ–
* Doct => æ–‡æ¡£
* Chore => å…¶ä»–

å¯ä»¥ç›´æ¥é€šè¿‡è§„èŒƒçš„å‰ç¼€å°†æ—¥å¿—è¿›è¡Œåˆ†ç±»ã€‚è¿™å°±æ˜¯æ—¥å¿—è§„èŒƒåŒ–çš„å¦ä¸€ä¸ªå¥½å¤„ï¼Œå¯ä»¥ç»Ÿè®¡æäº¤ã€‚

```py
import os
import json
from pathlib import Path
import sys
import getopt

argv = sys.argv[1:]

name = 'product' # preview | product (é¢„è§ˆæ¨¡å¼å’Œå‘ç‰ˆæ¨¡å¼)
 
try:
    opts, args = getopt.getopt(argv, "m:")  # çŸ­é€‰é¡¹æ¨¡å¼
except:
    print("é”™è¯¯ï¼Œä¸æ”¯æŒm:")

for opt, arg in opts:
    if opt in ['-m']:
        name = arg


## æœ€å¼€å§‹æ”¶é›†æ—¥å¿—çš„ commitid
start_commit_id = "xxxxw454344346"

# æ˜¯å¦æ˜¯ä¸Šä¼ åˆ°çº¿ä¸Š
# å¦‚æœæ˜¯ä¸Šä¼ åˆ°çº¿ä¸Šï¼Œåˆ™æ—¥å¿—ä» start_commit_id å¼€å§‹è·å–
# å¦‚æœæ˜¯æ—¥å¸¸å‘ç‰ˆï¼Œåˆ™æ—¥å¿—ä»å½“å‰ç‰ˆæœ¬çš„ä¸Šä¸€æ¬¡æ‰“åŒ…çš„ commit å¼€å§‹
is_online_release = name == 'product'

history_commit_file = "%s/package-logs.json" % str(Path.home())

def init_history_commit_file():
    if not os.path.exists(history_commit_file):
        with open(history_commit_file, 'w') as f:
            json.dump({"name": "version logs"}, f)
    else:
        pass

def write_note(content):
    with open('release-note.txt', 'w') as f:
        content = f.write(content)

def git_shell(git_command):
    try:
        return os.popen(git_command).read().strip()
    except:
        return None

def get_history_commit_id(branch):
    result = {}
    with open(history_commit_file, 'r') as f:
        result = json.load(f)
    return result.get(branch, None)


def save_history_commit(branch, commit_id):
    result = {}
    with open(history_commit_file, 'r') as f:
        result = json.load(f)
    
    with open(history_commit_file, 'w') as ff:
        result[branch] = commit_id
        json.dump(result, ff)
        
def pretty_log(logs):
    # Feat => æ–°å¢
    # Fix => bug
    # Refactor => ä¼˜åŒ–
    # Doct => æ–‡æ¡£
    # Chore => å…¶ä»–
    pass

init_history_commit_file()

# è·å–å½“å‰åˆ†æ”¯å
git_branch = git_shell('git rev-parse --abbrev-ref HEAD')

if not is_online_release:
    history_commit_id = get_history_commit_id(git_branch)
    if history_commit_id:
        start_commit_id = history_commit_id


# å½“å‰åˆ†æ”¯çš„æœ€åä¸€ä¸ªæäº¤ID
last_commit_id = git_shell('git rev-parse HEAD')

log_cmd = "git log %s..%s --date=short --no-merges --pretty=" % (start_commit_id, last_commit_id) + f"format:'* %s(%an)'"
git_logs = git_shell(log_cmd)


# è·å–åˆ°æ—¥å¿—åï¼Œéœ€è¦å¯¹æ—¥å¿—è¿›è¡Œå½’ç±»ï¼Œä¾¿äºé˜…è¯»
git_logs = pretty_log(git_logs)

# å†™å…¥æ—¥å¿—
write_note(git_logs)

if not is_online_release:
    save_history_commit(git_branch, last_commit_id)


print('âœ… æ—¥å¿—ç”Ÿæˆå®Œæˆ')
```

`pretty_log` å¹¶æ²¡æœ‰æä¾›å®ç°ä»£ç ï¼Œè¯»è€…å¯ä»¥è‡ªå·±å¡«å……ğŸ¤—ã€‚


```sh
åŠªåŠ›æˆä¸ºä¸€åçˆ±å·æ‡’çš„ç¨‹åºå‘˜ğŸ’ªï¼Œççˆ±ç”Ÿå‘½
```