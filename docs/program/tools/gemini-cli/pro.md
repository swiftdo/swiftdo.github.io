---
title: 高级技巧与性能优化
sitemap:
  exclude: false
  changefreq: hourly
date: 2025-07-09T00:00:00.000Z
tags:
  - tools
  - gemini
createTime: 2025/07/09 21:38:44
permalink: /article/5xkqazp1/
---

要充分发挥Gemini CLI和MCP的潜力，这里有一些高级技巧和优化建议：

## 使用自定义指令文件

你可以在项目根目录创建`GEMINI.md`文件，定义特定项目的指令和规则：

```md
# 项目指南

## 代码风格
- 使用ES6+语法
- 遵循Airbnb JavaScript风格指南
- 组件采用函数式编程风格

## 项目结构
/src
  /components - React组件
  /hooks - 自定义Hooks
  /utils - 工具函数
  /api - API客户端

## 数据流
- 使用Redux管理全局状态
- API请求应使用RTK Query
- 组件内状态使用React Hooks
```

Gemini CLI会自动加载这些信息，使AI回答更符合你的项目要求。你还可以在这个文件中指定MCP工具的使用偏好和限制。


## 优化令牌使用

大型项目可能会很快耗尽令牌限额。以下是几个优化策略：

- 使用`/compress`命令压缩会话历史，减少上下文占用
- 有针对性地引用特定文件，而不是整个代码库，如`@src/components/critical.js`
- 使用`/memory add`添加关键信息，避免重复解释
- 对于大型项目分析，考虑使用分阶段方法，先分析架构，再逐模块深入
- 使用`/stats`命令监控令牌使用情况，及时调整策略

## MCP服务器性能调优

如果你使用自定义MCP服务器，可以考虑以下优化：

- **实现结果缓存**：避免重复计算，特别是对于昂贵的操作
- **使用异步处理**：对于长时间运行的任务，实现异步处理并提供进度更新
- **限制返回数据大小**：保持在100-200KB以内，避免模型处理超大响应
- **添加超时处理**：避免工具调用挂起，影响整体体验
- **实现分页**：对于大量数据，提供分页机制，允许模型请求更多数据
- **优化启动时间**：减少MCP服务器的冷启动延迟，提高首次响应速度

