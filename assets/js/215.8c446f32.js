(window.webpackJsonp=window.webpackJsonp||[]).push([[215],{679:function(t,a,s){"use strict";s.r(a);var e=s(2),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("blockquote",[a("p",[t._v("原文："),a("a",{attrs:{href:"https://developer.apple.com/documentation/swift_packages/localizing_package_resources",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("https://developer.apple.com/documentation/swift_packages/localizing_package_resources"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("确保您的 Swift 包为许多语言环境提供本地化资源。")]),t._v(" "),a("h2",{attrs:{id:"概览"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概览"}},[t._v("#")]),t._v(" 概览")]),t._v(" "),a("p",[t._v("将你的 Swift 包中的资源本地化，可以确保它对尽可能多的开发者有用。尽早采用本地化的资源，以避免以后的额外开发成本。")]),t._v(" "),a("h2",{attrs:{id:"声明默认的本地化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#声明默认的本地化"}},[t._v("#")]),t._v(" 声明默认的本地化")]),t._v(" "),a("p",[t._v("要对你的包的资源进行本地化，请在你的包清单中向包的初始化程序传递可选的 defaultLocalization 参数。这个例子提供了英语作为默认的本地化。")]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" package "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Package")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MyLibrary"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    defaultLocalization"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"en"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    platforms"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    products"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Products define the executables and libraries a package produces, and make them visible to other packages.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Dependencies declare other packages that this package depends on.")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// .package(url: /* package url */, from: "1.0.0"),')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    targets"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Targets are the basic building blocks of a package. A target can define a module or a test suite.")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Targets can depend on other targets in this package, and on products in packages this package depends on.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("当你在软件包清单中声明defaultLocalization的值时，Xcode要求该软件包包含本地化的资源。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[a("strong",[t._v("Important")])]),t._v(" "),a("p",[t._v("当声明支持的语言，或命名包含本地化资源的目录时，使用两个字母的"),a("code",[t._v("ISO 639-1")]),t._v("或三个字母的"),a("code",[t._v("ISO 639-2")]),t._v("语言代码，以及可选的区域或脚本指定符。参见"),a("a",{attrs:{href:"https://developer.apple.com/documentation/bundleresources/information_property_list/cfbundledevelopmentregion",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("CFBundleDevelopmentRegion"),a("OutboundLink")],1),t._v("以了解更多信息")])]),a("h2",{attrs:{id:"将资源添加到特定于语言的目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#将资源添加到特定于语言的目录"}},[t._v("#")]),t._v(" 将资源添加到特定于语言的目录")]),t._v(" "),a("p",[t._v("要使用Xcode的默认本地化机制，请将本地化的资源放在特定语言的目录中。一个特定语言的目录有一个使用ISO 639语言代码和可选代号的名称，后面是.lproj后缀，并且不包含子目录。例如，英国使用的英语资源位于名为en-GB.lproj的目录中。通过将软件包资源放在以.lproj结尾的目录中，并使用ISO 639语言代码，Xcode可以自动推断出语言。")]),t._v(" "),a("p",[t._v("将您的"),a("code",[t._v(".lproj")]),t._v("目录放在一个名为 Resources 的父目录中，这样您就能识别出它包含包的资源。")]),t._v(" "),a("p",[t._v("当您构建您的Swift包时，Xcode会验证该包的本地化资源并显示警告或错误，以帮助防止在运行时出现问题。例如，Xcode 会检测:")]),t._v(" "),a("ul",[a("li",[t._v(".lproj目录下的子目录。")]),t._v(" "),a("li",[t._v("缺少某个地区的资源。")]),t._v(" "),a("li",[t._v("重复的、冲突的或不可访问的资源。")])]),t._v(" "),a("p",[t._v("下面的截图显示了一个带有本地化资源的Swift包的结构。")]),t._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://docs-assets.developer.apple.com/published/5bf9736b78/3578946@2x.png",loading:"lazy"}})]),t._v(" "),a("h2",{attrs:{id:"本地化-storyboard-和-interface-builder-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本地化-storyboard-和-interface-builder-文件"}},[t._v("#")]),t._v(" 本地化 Storyboard 和 Interface Builder 文件")]),t._v(" "),a("p",[t._v("如果 Swift 包包含故事板或 Interface Builder 文件作为资源，则采用基本国际化来减轻本地化人员直接修改这些文件的需要。要让 Xcode 自动识别 Swift 包中的基本本地化：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("在软件包清单中为 defaultLocalization 声明一个值。")])]),t._v(" "),a("li",[a("p",[t._v('创建一个名为 "Resources"的目录，用于存放您的本地化资源。')])]),t._v(" "),a("li",[a("p",[t._v("创建一个名为"),a("code",[t._v("Base.lproj")]),t._v("的子目录，并将包的storyboards和Interface Builder文件放入其中。")])]),t._v(" "),a("li",[a("p",[t._v("将所有支持的语言的.lproj目录放在Resources目录中。")])])]),t._v(" "),a("p",[t._v("如果你喜欢明确地声明一个资源用于基础国际化，请使用流程规则并将"),a("code",[t._v("Resource.Localization.base")]),t._v("传递给它。例如，使用下面的方法来声明一个支持基础国际化的.xib文件：")]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("process")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"path/to/MyViewController.xib"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" localization"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("base"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("关于基数国际化的更多信息，请看"),a("a",{attrs:{href:"https://developer.apple.com/library/archive/documentation/MacOSX/Conceptual/BPInternational/InternationalizingYourUserInterface/InternationalizingYourUserInterface.html#//apple_ref/doc/uid/10000171i-CH3-SW2",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("用户界面的国际化"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"访问本地化资源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#访问本地化资源"}},[t._v("#")]),t._v(" 访问本地化资源")]),t._v(" "),a("p",[t._v("Xcode 识别 .lproj 目录中的本地化资源并自动创建资源包。因此，您可以使用您在应用程序开发中可能已经知道的 API 来访问包的代码中的本地化资源文件。例如，使用Foundation在运行时访问一个本地化的字符串：")]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" localizedString "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NSLocalizedString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("”a_localized_string”"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bundle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bundle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" comment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" “a comment”"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("类似地，你可以用UIImage访问本地化的图像资源：")]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UIImage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("named"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"image name"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" with"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token nil constant"}},[t._v("nil")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("。\n")])])]),a("p",[t._v("更多信息，请参见"),a("a",{attrs:{href:"https://developer.apple.com/documentation/swift_packages/bundling_resources_with_a_swift_package#3578939",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("在代码中访问资源"),a("OutboundLink")],1),t._v("。")])])}),[],!1,null,null,null);a.default=n.exports}}]);