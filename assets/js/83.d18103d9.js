(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{765:function(t,o,e){"use strict";e.r(o);var r=e(8),i=Object(r.a)({},(function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[t._v("在之前的文章中，有写过一篇"),e("a",{attrs:{href:"https://oldbird.run/flutter/t5-flutter-web-deploy.html#flutter-web",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("《在 Github 上部署一个 Flutter Web 应用》"),e("OutboundLink")],1),t._v("，每次提交代码，就会触发 Github Actions 的构建流程，完成 Flutter Web 的编译部署，省心省力，一劳永逸。那么是否也能自动够构建出 iOS 包？答案是肯定的，本文将阐述其构建步骤。")]),t._v(" "),e("h2",{attrs:{id:"步骤概述"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤概述"}},[t._v("#")]),t._v(" 步骤概述")]),t._v(" "),e("p",[t._v("要实现构建出 Flutter iOS 包的目标，必须执行以下步骤：")]),t._v(" "),e("ul",[e("li",[t._v("安装 Apple 证书和配置文件")]),t._v(" "),e("li",[t._v("指定正确的 Flutter 版本")]),t._v(" "),e("li",[t._v("获取 pub 包")]),t._v(" "),e("li",[t._v("构建应用程序")]),t._v(" "),e("li",[t._v("使用正确的 Apple 证书对其进行签名")]),t._v(" "),e("li",[t._v("生成 "),e("code",[t._v(".xarchive")])]),t._v(" "),e("li",[t._v("从"),e("code",[t._v(".xarchive")]),t._v(" 中生成 "),e("code",[t._v(".ipa")])]),t._v(" "),e("li",[t._v("分享给你的用户")])]),t._v(" "),e("p",[t._v("为了完成顺利构建，我们必须提供：")]),t._v(" "),e("ul",[e("li",[t._v("可以苹果打包"),e("strong",[t._v("证书")]),t._v("（"),e("code",[t._v(".p12")]),t._v("），以及导出证书的密码")]),t._v(" "),e("li",[t._v("证书对应的"),e("strong",[t._v("描述文件")]),t._v("（"),e("code",[t._v(".mobileprovision")]),t._v("）")])]),t._v(" "),e("blockquote",[e("p",[t._v("如果您不知道如何获取证书和描述文件，可以参考这篇文章："),e("a",{attrs:{href:"https://oldbird.run/swift/ios/ios-build-cers.html",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("《iOS 打包证书制作》"),e("OutboundLink")],1)])]),t._v(" "),e("p",[t._v("准备就绪，那我们开始吧！")]),t._v(" "),e("h2",{attrs:{id:"github-actions-是什么"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#github-actions-是什么"}},[t._v("#")]),t._v(" GitHub Actions 是什么")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/features/actions",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("GitHub Actions"),e("OutboundLink")],1),t._v(" 是 GitHub 的"),e("a",{attrs:{href:"https://www.ruanyifeng.com/blog/2015/09/continuous-integration.html",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("持续集成服务"),e("OutboundLink")],1),t._v("，于2018年10月推出。")]),t._v(" "),e("p",[t._v("大家知道，持续集成由很多操作组成，比如抓取代码、运行测试、登录远程服务器，发布到第三方服务等等。GitHub 把这些操作就称为 actions。")]),t._v(" "),e("p",[t._v("很多操作在不同项目里面是类似的，完全可以共享。GitHub 注意到了这一点，想出了一个很妙的点子，允许开发者把每个操作写成独立的脚本文件，存放到代码仓库，使得其他开发者可以引用。")]),t._v(" "),e("p",[t._v("如果你需要某个 action，不必自己写复杂的脚本，直接引用他人写好的 action 即可，整个持续集成过程，就变成了一个 actions 的组合。")]),t._v(" "),e("p",[e("strong",[t._v("基本概念")])]),t._v(" "),e("p",[t._v("（1）"),e("strong",[t._v("workflow")]),t._v("（工作流程）：持续集成一次运行的过程，就是一个 workflow。")]),t._v(" "),e("p",[t._v("（2）"),e("strong",[t._v("job")]),t._v("（任务）：一个 workflow 由一个或多个 jobs 构成，含义是一次持续集成的运行，可以完成多个任务。")]),t._v(" "),e("p",[t._v("（3）"),e("strong",[t._v("step")]),t._v("（步骤）：每个 job 由多个 step 构成，一步步完成。")]),t._v(" "),e("p",[t._v("（4）"),e("strong",[t._v("action")]),t._v("（动作）：每个 step 可以依次执行一个或多个命令（action）。")]),t._v(" "),e("blockquote",[e("p",[t._v("快速了解 GiHub Actions，可以参阅"),e("a",{attrs:{href:"https://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("《GitHub Actions 入门教程》"),e("OutboundLink")],1)])]),t._v(" "),e("p",[t._v("我们将创建一个"),e("code",[t._v("GitHub Action")]),t._v("，让您只需单击一下即可生成您的"),e("code",[t._v("ipa")]),t._v("。")]),t._v(" "),e("h2",{attrs:{id:"配置-github-actions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置-github-actions"}},[t._v("#")]),t._v(" 配置 GitHub Actions")]),t._v(" "),e("p",[t._v("让我们创建我们的第一个"),e("strong",[t._v("工作流程（workflow）")]),t._v("！在您的项目中，您需要在"),e("code",[t._v(".github")]),t._v(" 文件夹中创建一个"),e("code",[t._v("workflows")]),t._v("文件夹，然后创建一个名为："),e("code",[t._v("ios-release.yml")]),t._v(" 的新文件。")]),t._v(" "),e("p",[e("img",{staticClass:"lazy",attrs:{alt:"","data-src":"assets/16446532582826.jpg",loading:"lazy"}})]),t._v(" "),e("p",[t._v("该文件将包含我们的第一个作业"),e("code",[t._v("build_ios")]),t._v("：")]),t._v(" "),e("h2",{attrs:{id:"参阅"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参阅"}},[t._v("#")]),t._v(" 参阅")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://damienaicheh.github.io/flutter/github/actions/2021/04/22/build-sign-flutter-ios-github-actions-en.html",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("How to build and sign your Flutter iOS application using GitHub Actions"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://damienaicheh.github.io/github/actions/2021/04/15/environment-variables-secrets-github-actions-en.html",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("How to use environment variables and secrets using GitHub Actions"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);o.default=i.exports}}]);