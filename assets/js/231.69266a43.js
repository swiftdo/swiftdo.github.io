(window.webpackJsonp=window.webpackJsonp||[]).push([[231],{909:function(t,e,a){"use strict";a.r(e);var s=a(8),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("可能你有过以下的经历：")]),t._v(" "),a("ul",[a("li",[t._v("没有添加很好的忽略文件 (.gitignore)，有个不该上传的东西被我上传上去了！后面删除，但是还是可以从历史中，于是便修改了源代码，但是在 History 中还是能看到以前的提交记录！(如果是一些敏感信息的话，那就 GG 了)")]),t._v(" "),a("li",[t._v("很久之前在工程里加了个很大的第三方静态库且入库了。但是后面的某一天改用Pod (依赖管理工具) 管理，删除了这个第三方静态库，但是仓库的空间并没有减少。")])]),t._v(" "),a("p",[t._v("怎么解决上面的问题，可以从项目中彻底移除？")]),t._v(" "),a("p",[a("strong",[a("a",{attrs:{href:"https://rtyley.github.io/bfg-repo-cleaner/",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("BFG-Repo-Cleaner"),a("OutboundLink")],1)]),t._v(" 闪亮登场！清除大文件，文件夹，隐私文件的神器")]),t._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),a("p",[t._v("使用 Homebrew，可以使用如下命令安装 BFG：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("brew "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" bfg\n")])])]),a("h2",{attrs:{id:"删除文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除文件"}},[t._v("#")]),t._v(" 删除文件")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("bfg --delete-files RobotArm.sdf RobotArm.git\n")])])]),a("p",[t._v("这种情况 BFG 会保护当前版本(HEAD 所指的版本)，不去清理。但如果这个版本也有需要删除的文件，那么可以这么使用，解除保护")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("bfg --delete-files RobotArm.sdf --no-blob-protection\n")])])]),a("h2",{attrs:{id:"删除文件夹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除文件夹"}},[t._v("#")]),t._v(" 删除文件夹")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("bfg --delete-folders _Boot\n")])])]),a("p",[t._v("跟删除文件一样，如果需要接触当前版本的保护。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("bfg --delete-folders _Boot RobotArm.git --no-blob-protection\n")])])]),a("h2",{attrs:{id:"清理不需要的数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#清理不需要的数据"}},[t._v("#")]),t._v(" 清理不需要的数据")]),t._v(" "),a("p",[t._v("完成上面的指令后，实际上这些原文件并没有被删除，只是删除了 "),a("code",[t._v(".git")]),t._v(" 中的所有记录，还需要运行 "),a("code",[t._v("git gc")]),t._v(" 来清除。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" reflog expire --expire"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("now --all "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" gc --prune"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("now --aggressive\n")])])]),a("h2",{attrs:{id:"推送到远端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#推送到远端"}},[t._v("#")]),t._v(" 推送到远端")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push -u origin master --force\n")])])]),a("p",[t._v("在多人协作项目中，如果代码风格统一、代码提交信息的说明准确，那么在后期协作以及 Bug 处理时会更加方便。")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("Feat")]),t._v("：    新功能（feature）")]),t._v(" "),a("li",[a("code",[t._v("Fix")]),t._v("：     修补bug")]),t._v(" "),a("li",[a("code",[t._v("Docs")]),t._v("：    文档（documentation）")]),t._v(" "),a("li",[a("code",[t._v("Style")]),t._v("：   格式（不影响代码运行的变动）")]),t._v(" "),a("li",[a("code",[t._v("Refactor")]),t._v("：重构（即不是新增功能，也不是修改bug的代码变动）")]),t._v(" "),a("li",[a("code",[t._v("Test")]),t._v("：    增加测试")]),t._v(" "),a("li",[a("code",[t._v("Chore")]),t._v("：   构建过程或辅助工具的变动")])]),t._v(" "),a("p",[t._v("如果 type 为 Feat 和 Fix，则该 commit 将肯定出现在 Change log 之中。")]),t._v(" "),a("blockquote",[a("p",[t._v("参考："),a("a",{attrs:{href:"https://blog.csdn.net/y491887095/article/details/80594043",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("git commit 提交规范 & 规范校验"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=r.exports}}]);