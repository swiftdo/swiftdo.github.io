(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{576:function(t,a,s){"use strict";s.r(a);var n=s(2),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"available-与调用方进行沟通"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#available-与调用方进行沟通"}},[t._v("#")]),t._v(" @available 与调用方进行沟通")]),t._v(" "),a("p",[t._v("保持代码不变很难，因为需求不断在变化，系统、框架不断在更新。那么项目实践中，往往会废弃掉一些类或方法。如果是自己独立维护代码，且不需要将代码给他人使用，废弃 API 对你来说是非常简单的，直接改动源码即可。但是对于多人合作的项目，特别是开源的库，废弃一个公开的 API 不是简单的改动下代码就可以，因为你的改动将会影响使用你这个库的所有代码。公开的 API 的更新换代，就相当于你改动了和别人约定的契约一样，这也侧面反映了作者的专业水平。")]),t._v(" "),a("p",[t._v("那么如果要废弃一个 API，在 Swift 中我们该如何做？")]),t._v(" "),a("h2",{attrs:{id:"小案例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小案例"}},[t._v("#")]),t._v(" 小案例")]),t._v(" "),a("p",[t._v("Swift 提供了 "),a("code",[t._v("@available")]),t._v(" 注解。可以简单地将其附加到特定方法甚至整个类：")]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attribute atrule"}},[t._v("@available")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deprecated"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("oldMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("这会就会出现以下警告：")]),t._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"-w394","data-src":"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/12bd296417e64f8d91359095f0f2e548~tplv-k3u1fbpfcp-zoom-1.image",loading:"lazy"}})]),t._v(" "),a("p",[t._v("如果我们要给废弃的 API，添加更多的废弃信息，我们可以这样：")]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attribute atrule"}},[t._v("@available")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deprecated"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"不要再使用该方法了"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("oldMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("将 "),a("code",[t._v("message")]),t._v(" 设置为 "),a("code",[t._v("不要再使用该方法了")]),t._v("，提示效果如下：")]),t._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"-w639","data-src":"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/de1a80df892745b88658e25e808dea87~tplv-k3u1fbpfcp-zoom-1.image",loading:"lazy"}})]),t._v(" "),a("p",[t._v("通常，废弃了一个 API，如果能提示调用方可以使用的新 API 是什么，那就非常完美了。如需要将旧的 API 改名，就可以这么做：")]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attribute atrule"}},[t._v("@available")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deprecated"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" renamed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"newMethod(number:)"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"不要再使用该方法了"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("oldMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("newMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"值为：')]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("\\(")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[t._v("number")]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("添加 "),a("code",[t._v("renamed")]),t._v(" 后，我们的旧方法调用：")]),t._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"-w992","data-src":"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2047df342dd74f4b98a22d1bb3bfc86f~tplv-k3u1fbpfcp-zoom-1.image",loading:"lazy"}})]),t._v(" "),a("p",[t._v("这种警告是可以展开的：")]),t._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"-w981","data-src":"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/28208eea776c4cd687edc31714c4b6c6~tplv-k3u1fbpfcp-zoom-1.image",loading:"lazy"}})]),t._v(" "),a("p",[t._v("可以点击 Fix 按钮，代码将自动替换为新的 API。")]),t._v(" "),a("h2",{attrs:{id:"available-归类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#available-归类"}},[t._v("#")]),t._v(" @available 归类")]),t._v(" "),a("p",[a("code",[t._v("@available")]),t._v(" 有这么几种声明：")]),t._v(" "),a("h3",{attrs:{id:"约束平台和版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#约束平台和版本"}},[t._v("#")]),t._v(" 约束平台和版本")]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attribute atrule"}},[t._v("@available")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("platform version "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" platform version "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ul",[a("li",[a("code",[t._v("platform")]),t._v(" 是指平台，可以是 iOS, macCatalyst, macOS / OSX, tvOS, watchOS 等。更多可以查看 "),a("a",{attrs:{href:"https://github.com/llvm-mirror/clang/blob/master/include/clang/Basic/Attr.td#L782-L789",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("https://github.com/llvm-mirror/clang/blob/master/include/clang/Basic/Attr.td#L782-L789"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("version")]),t._v(" 是指版本")]),t._v(" "),a("li",[a("code",[t._v(",")]),t._v(" 分隔多个版本化平台")]),t._v(" "),a("li",[a("code",[t._v("*")]),t._v(" 表示该 API 可用于所有其他平台。")])]),t._v(" "),a("p",[t._v("举例：")]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attribute atrule"}},[t._v("@available")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("iOS "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AppIntro")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("在调用的时候，我们需要通过 "),a("code",[t._v("#available")])]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token other-directive property"}},[t._v("#available")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("iOS "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" appIntro "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AppIntro")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// .. 14以下的版本调用")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("当然我们也可以指定多个平台：")]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attribute atrule"}},[t._v("@available")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("iOS "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" macOS "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11.0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AppIntro")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"约束-swift-版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#约束-swift-版本"}},[t._v("#")]),t._v(" 约束 swift 版本")]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attribute atrule"}},[t._v("@available")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("swift version"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("比如需要 Swift 5.5 或更高版本才能使用 "),a("code",[t._v("oldMethod")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attribute atrule"}},[t._v("@available")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("swift "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("oldMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"约束指定平台的-introduced-deprecated-obsoleted-和-unavailable"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#约束指定平台的-introduced-deprecated-obsoleted-和-unavailable"}},[t._v("#")]),t._v(" 约束指定平台的 introduced, deprecated, obsoleted 和 unavailable")]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// With introduced, deprecated, and/or obsoleted")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attribute atrule"}},[t._v("@available")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("platform "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" introduced"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" version "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deprecated"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" version "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" obsoleted"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" version\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" renamed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"..."')])]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"..."')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// With unavailable")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attribute atrule"}},[t._v("@available")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("platform "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" unavailable "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" renamed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"..."')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"..."')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ul",[a("li",[a("code",[t._v("platform")]),t._v("：平台名称")]),t._v(" "),a("li",[a("code",[t._v("introduced")]),t._v("：开始引进的版本号")]),t._v(" "),a("li",[a("code",[t._v("deprecated")]),t._v("：从指定平台开始过期的版本")]),t._v(" "),a("li",[a("code",[t._v("obsoleted")]),t._v("：从指定平台开始废弃的版本（注意弃用的区别，deprecated 是还可以继续使用，只不过是不推荐了，obsoleted 是调用就会编译错误）")]),t._v(" "),a("li",[a("code",[t._v("message")]),t._v("：给出一些附加信息")]),t._v(" "),a("li",[a("code",[t._v("renamed")]),t._v("：重命名后的新名称")]),t._v(" "),a("li",[a("code",[t._v("unavailable")]),t._v("：指定平台上是无效的")])]),t._v(" "),a("p",[t._v("这些参数可以相互组合使用。下面列举几个常用案例：")]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attribute atrule"}},[t._v("@available")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("iOS "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attribute atrule"}},[t._v("@available")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tvOS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" unavailable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attribute atrule"}},[t._v("@available")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("macCatalyst"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" unavailable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("handleShakeGesture")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" … "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),a("p",[t._v("正确的使用"),a("code",[t._v("@available")]),t._v("注解可以增强你和你的 API 使用者之间的沟通，新旧 API 替换体验会变得友好很多。")]),t._v(" "),a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://nshipster.com/available/",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("Swift API Availability"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://docs.swift.org/swift-book/ReferenceManual/Attributes.html",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("Declaration Attributes"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);