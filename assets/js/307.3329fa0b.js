(window.webpackJsonp=window.webpackJsonp||[]).push([[307],{770:function(t,a,s){"use strict";s.r(a);var e=s(2),v=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("在使用 Git 的过程中，有时会不小心丢失 commit 信息。")]),t._v(" "),a("h2",{attrs:{id:"丢失恢复"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#丢失恢复"}},[t._v("#")]),t._v(" 丢失恢复")]),t._v(" "),a("p",[t._v("通常最快捷的办法是使用"),a("code",[t._v("git reflog")]),t._v("工具。当你 (在一个仓库下) 工作时，Git 会在你每次修改了 HEAD 时悄悄地将改动记录下来。当你提交或修改分支时，reflog 就会更新。"),a("code",[t._v("git update-ref")]),t._v(" 命令也可以更新 reflog。")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("先用 reflog 看看记录的所有 HEAD 的历史: "),a("code",[t._v("git reflog")])])]),t._v(" "),a("li",[a("p",[t._v("然后找到那个 SHA，进行恢复: "),a("code",[t._v("git reset --hard 98abc5a")])])])]),t._v(" "),a("h2",{attrs:{id:"想撤销-commit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#想撤销-commit"}},[t._v("#")]),t._v(" 想撤销 commit")]),t._v(" "),a("p",[t._v("写完代码后，很愉快的敲下了如下：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"本功能全部完成"')]),t._v("\n")])])]),a("p",[t._v("执行完 commit 后，想撤回 commit，怎么办？")]),t._v(" "),a("p",[t._v("执行：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" reset "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--soft")]),t._v(" HEAD^\n")])])]),a("p",[t._v("这样就成功的撤销了你的 commit")]),t._v(" "),a("p",[t._v("注意，仅仅是撤回 commit 操作，您写的代码仍然保留。")]),t._v(" "),a("h2",{attrs:{id:"reset-参数说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reset-参数说明"}},[t._v("#")]),t._v(" reset 参数说明:")]),t._v(" "),a("p",[a("strong",[t._v("--mixed")])]),t._v(" "),a("p",[t._v("意思是：不删除工作空间改动代码，撤销 commit，并且撤销"),a("code",[t._v("git add .")]),t._v("操作\n这个为默认参数，"),a("code",[t._v("git reset --mixed HEAD^")]),t._v(" 和 "),a("code",[t._v("git reset HEAD^")]),t._v(" 效果是一样的。")]),t._v(" "),a("p",[a("strong",[t._v("--soft")])]),t._v(" "),a("p",[t._v("不删除工作空间改动代码，撤销 commit，不撤销 "),a("code",[t._v("git add .")])]),t._v(" "),a("p",[a("strong",[t._v("--hard")])]),t._v(" "),a("p",[t._v("删除工作空间改动代码，撤销 commit，撤销 "),a("code",[t._v("git add .")])]),t._v(" "),a("p",[t._v("注意完成这个操作后，就恢复到了上一次的 commit 状态。")]),t._v(" "),a("h2",{attrs:{id:"改一下注释"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#改一下注释"}},[t._v("#")]),t._v(" 改一下注释")]),t._v(" "),a("p",[t._v("如果 commit 注释写错了，只是想改一下注释，只需要：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--amend")]),t._v("\n")])])]),a("p",[t._v("此时会进入默认 vim 编辑器，修改注释完毕后保存就好了。")])])}),[],!1,null,null,null);a.default=v.exports}}]);